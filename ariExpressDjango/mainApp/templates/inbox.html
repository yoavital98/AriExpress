{% extends 'base.html'%}
{% block content %}
<!--=========INCLUDE========-->
{% include 'messages/message.html'%}

<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
		<title>My SweetAlert Page</title>
		<!-- Include SweetAlert CSS -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.css">

		<!-- Include jQuery and SweetAlert JS -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
		<title>Bootstrap Example</title>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

	   
		
	</head>
<body>
	<main>
		<h1>Inbox</h1>
		<!--Table of messages-->
		<div class = "col-lg-12 hide">
			<div style = "margin-top: 20 px;">
				<table class = "table table-sm" >
					<thead class = "table secondary">
						<tr>
							<th style = "width: 20%;">Name</th>
							<th style = "width: 50%;">Subject</th>
							<th style = "width: 10%;">Recived on</th>
							<th style = "width: 10%;">Status</th>
							<th style = "width: 10%; text align: center;" colspan="2">Actions</th>
						</tr>
					</thead>
					{% for usermessage in usermessages %}
					<tr style="background-color:#f3f8ff;"> 
						<td>{{ usermessage.sender }}</td>
						<td>{{ usermessage.subject }}</td>
						<td>{{ usermessage.creation_date | date:'m/d/y (H:i' }}</td>

						<td>{{ usermessage.status }}</td>

						<td>
							<button class="btn btn-secondary btn-sm btn-action" title="Delete message" data-bs-toggle="modal" data-bs-target="#deleteModal{{ usermessage.pk }}">
								<i class="fas fa-trash-alt"></i>
							</button>
						</td>
						<td>
							<button class="btn text-light btn-sm btn-action" title="Read message" style="background-color:#0074fe;">
								<i class="fas fa-envelope"></i>
							</button>
						</td>
					</tr>

					<!--Delete message button functionality-->
					{% include 'messages/delete.html' %}

					{% endfor %}	
				</table>
			</div>
		</div>
		<br>
		<div>
			<button type="button" class="btn text-light" data-bs-toggle="modal" data-bs-target="#messageModal" style = "background-color: #0074fe; position: absolute; bottom: 50px; right: 50px;">
				<i class = "fas fa-envelope fa-2x"></i>
			</button>	
		</div>
		<!--Pagination-->
		<nav>
			{% if usermessages.has_other_pages %}
			<ul class="pagination"> 
				{% if usermessages.has_previous %}
				<a href="?page=1" class="btn btn-outline-secondary mb4" style="border-radius: 1px; border= 1px solid #d3d3d3">First</a>
				<li class="page-item"><a class="page-link" href="?page={{ usermessages.previous_page_number }}"><i class="fas fa-angle-double-left"></i></a></li>
				{% else %}
				<li class="page-item disabled"></li>
				{% endif %}
				{% for i in usermessages.paginator.page_range %}
				{% if usermessages.number == i %}
				<li class="page-item active"><span class="page-link">{{ i }}<span class="sr-only"></span></span></li>
				{% else %}
				<li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
				{% endif %}
				{% endfor %}
		
				{% if usermessages.has_next %}
				<li class="page-item"><a class="page-link" href="?page={{ usermessages.next_page_number }}"><i class="fas fa-angle-double-right"></i></a></li>
				<a href="?page={{ usermessages.paginator.num_pages }}" class="btn btn-outline-secondary mb4" style="border-radius: 1px; border= 1px solid #d3d3d3; border-left: none;">Last</a>
				{% else %}
				<li class="page-item disabled"></li>
				{% endif %}
			</ul>
			{% endif %}
		</nav>
	</main>
</body>
</html>



{% endblock%}